<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Centos8(1)-配置本地yum源</title>
    <url>/2020/02/07/Centos&amp;redhat/Centos8(1)/</url>
    <content><![CDATA[<p>博主在昨天晚上进行了centos8的安装，在配置本地yum方法上一直失败，一直报元数据失败等。<br>在今天下午，我对Centos8的yum源进行了分析得到一下结果：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# grep -v "#" /etc/yum.repos.d/CentOS-Media.repo          </span><br><span class="line"></span><br><span class="line">[c8-media-BaseOS]    //Centos的工具库</span><br><span class="line">name=CentOS-BaseOS-$releasever - Media    </span><br><span class="line">baseurl=file:///media/CentOS/BaseOS</span><br><span class="line">        file:///media/cdrom/BaseOS</span><br><span class="line">        file:///media/cdrecorder/BaseOS</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line"></span><br><span class="line">[c8-media-AppStream]  //Centos的软件库</span><br><span class="line">name=CentOS-AppStream-$releasever - Media</span><br><span class="line">baseurl=file:///media/CentOS/AppStream</span><br><span class="line">        file:///media/cdrom/AppStream</span><br><span class="line">        file:///media/cdrecorder/AppStream</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br></pre></td></tr></table></figure>
<p>这也符合了Centos8的最新安装的dnf的方式！下面我就来教大家怎么进行配置本地yum</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# rm -rf /etc/yum.repos.d/CentOS-[DBVAE]*    //删除DBVAE开头的repo文件</span><br><span class="line">[root@localhost ~]# vim /etc/yum.repos.d/CentOS-Media.repo      //编辑Centos-media.repo文件</span><br><span class="line">[c8-media-BaseOS]</span><br><span class="line">name=CentOS-BaseOS-$releasever - Media</span><br><span class="line">baseurl=file:///mnt/cdrom/BaseOS    //这边的BaseOS这个目录不用创建，等等直接挂载到/mnt/cdrom即可</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   //开启yum仓库（工具）</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line"></span><br><span class="line">[c8-media-AppStream]</span><br><span class="line">name=CentOS-AppStream-$releasever - Media</span><br><span class="line">baseurl=file:///mnt/cdrom/AppStream     //这边跟上面一样</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   //开启yum仓库（应用）</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line">保存退出</span><br><span class="line">[root@localhost ~]# mkdir /mnt/cdrom   //创建挂载目录</span><br><span class="line">[root@localhost ~]# mount /dev/sr0 /mnt/cdrom/  //执行挂载</span><br><span class="line">mount: /mnt/cdrom: WARNING: device write-protected, mounted read-only.    这边是一个警告。没关系的</span><br><span class="line">[root@localhost ~]# cd /mnt/cdrom/</span><br><span class="line">[root@localhost cdrom]# ls   //我们会发现有AppStream和BaseOS目录。所以上面的我们就不用创建！</span><br><span class="line">AppStream  BaseOS  EFI  images  isolinux  media.repo  TRANS.TBL</span><br><span class="line">[root@localhost cdrom]# yum clean all  //清楚yum缓存</span><br><span class="line">20 文件已删除</span><br><span class="line">[root@localhost cdrom]# yum repolist   //查看yum仓库，完成到这边已经ok了</span><br><span class="line">CentOS-BaseOS-8 - Media                                                       33 MB/s | 2.2 MB     00:00    </span><br><span class="line">CentOS-AppStream-8 - Media                                                    21 MB/s | 5.4 MB     00:00    </span><br><span class="line">上次元数据过期检查：0:00:01 前，执行于 2020年02月07日 星期五 03时15分52秒。</span><br><span class="line">仓库标识                                        仓库名称                                                状态</span><br><span class="line">c8-media-AppStream                              CentOS-AppStream-8 - Media                              4,755</span><br><span class="line">c8-media-BaseOS                                 CentOS-BaseOS-8 - Media                                 1,65</span><br><span class="line">[root@localhost cdrom]# vim /etc/fstab   //进行开机自动挂载光盘</span><br><span class="line">/dev/sr0        /mnt/cdrom      iso9600 defaults 0 0   //添加此行即可</span><br></pre></td></tr></table></figure>
<p>上面就是本地yum搭建的过程。但是我在这边提醒一下大家，如果有网络就尽量使用网络上的yum仓库，这样也会省下一些<br>配置yum仓库的时间，同时也会实时更新最新版本</p>
]]></content>
      <categories>
        <category>Centos/Redhat</category>
      </categories>
      <tags>
        <tag>Centos8</tag>
        <tag>原创</tag>
      </tags>
  </entry>
  <entry>
    <title>shell脚本安装apche服务</title>
    <url>/2020/02/06/shell/index/</url>
    <content><![CDATA[<p>shell脚本的使用过程，将下面代码复制到Centos或者Redhat服务器上赋予执行权限执行即可<br>chmod +x shell脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo "正在检测您的服务器剩余的安装包!!!"</span><br><span class="line">rpm -qa |grep httpd &amp;&gt;/dev/null</span><br><span class="line">if [ $? -eq 0 ];then</span><br><span class="line">	yum -y remove httpd* &amp;&gt;/dev/null</span><br><span class="line">	echo "清理剩余安装包完成!!!"</span><br><span class="line">else</span><br><span class="line">	echo "您的服务器没有剩余安装包!!!"</span><br><span class="line">fi</span><br><span class="line">menu () &#123;</span><br><span class="line">rpm -qa |grep httpd &amp;&gt;/dev/null</span><br><span class="line">if [ $? -eq 1 ];then</span><br><span class="line">		echo "目前没有安装网站服务器"</span><br><span class="line">	read -p  "是否安装网站服务器(yes|no):" yes</span><br><span class="line">	if [ $yes = yes ];then</span><br><span class="line">		yum -y install httpd &amp;&gt;/dev/null</span><br><span class="line">		echo "网站服务器安装成功!!!!"</span><br><span class="line">		read -p  "请输入网站配置文件(默认储存/etc/httpd/conf.d/):" config</span><br><span class="line">			touch /etc/httpd/conf.d/$config'.conf'</span><br><span class="line">			echo "您的网站配置文件设置为:/etc/httpd/conf.d/$config.conf"</span><br><span class="line">		read -p  "请输入网站域名或IP地址:" domain</span><br><span class="line">			echo "您的网站域名或IP为:$domain"</span><br><span class="line">		read -p  "请输入网站根目录(默认为/var/www/html):" root</span><br><span class="line">			mkdir $root &amp;&gt;/dev/null</span><br><span class="line">			echo "网站根目录已经设置为$root"</span><br><span class="line">			read -p "请输入网站首页(默认为index.html):" index</span><br><span class="line">			touch /$root/$index</span><br><span class="line">			read -p "请输入网站首页内容:" neir</span><br><span class="line">			echo "$neir" &gt;&gt; /$root/$index</span><br><span class="line">			while true</span><br><span class="line">			do</span><br><span class="line">				read -p "是否重新加载配置文件(yes|no)" no</span><br><span class="line">				if [ $no = yes ];then</span><br><span class="line">					systemctl restart httpd</span><br><span class="line">					echo "网站服务器重新加载成功!!"</span><br><span class="line">					break</span><br><span class="line">				else</span><br><span class="line">					echo "建议您重启加载配置"</span><br><span class="line">				fi</span><br><span class="line">					</span><br><span class="line">			done</span><br><span class="line">echo "====================================================="</span><br><span class="line">echo "您的网站配置文件是:/etc/httpd/conf.d/$config.conf"</span><br><span class="line">echo "您的服务器域名或IP是:"$domain</span><br><span class="line">echo "您的服务器根目录是:"$root</span><br><span class="line">echo "您的服务器首页是:"$index</span><br><span class="line">echo "您的服务器首页内容是:"$neir</span><br><span class="line">echo "写入配置文件成功!!!赶紧访问你的服务器吧！"</span><br><span class="line">cat &gt;&gt; /etc/httpd/conf.d/$config.conf &lt;&lt; OEF</span><br><span class="line">&lt;virtualhost *:80&gt;</span><br><span class="line">servername $domain</span><br><span class="line">documentroot $root</span><br><span class="line">directoryindex $index </span><br><span class="line">&lt;directory "$root"&gt; </span><br><span class="line">        require all granted</span><br><span class="line">&lt;/directory&gt; </span><br><span class="line">&lt;/virtualhost&gt;</span><br><span class="line">OEF</span><br><span class="line">echo "====================================================="</span><br><span class="line">	else</span><br><span class="line">		echo "已经取消安装网站服务器"</span><br><span class="line">	fi</span><br><span class="line">else</span><br><span class="line">	echo "网站服务器已安装"	</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line">menu</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Centos/Redhat</category>
      </categories>
      <tags>
        <tag>shell脚本</tag>
      </tags>
  </entry>
  <entry>
    <title>博客知乎</title>
    <url>/2020/02/06/index/</url>
    <content><![CDATA[<p>本博主将把日常学习到的知识在该博客上进行分享！<br>请善待每一份资源，都来之不易，请尊重每一位博主<br>在原创文章中，未经博主允许，进行商用或者进行转载（未标明转载处）必究</p>
]]></content>
  </entry>
</search>
