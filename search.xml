<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Centos8(2)-网络配置</title>
    <url>/2020/02/08/shell/Centos8(2)%20/</url>
    <content><![CDATA[<p>今天我们就来聊聊Centos8的网络配置吧，当我兴致勃勃的打开Centos8，按照以前的Centos7的习惯更改了IP地址<br>然后进行重启的时候， 发现了一个错误</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# systemctl restart network</span><br><span class="line">Failed to restart network.service: Unit network.service not found.</span><br></pre></td></tr></table></figure>
<p>这就告诉我们network.manager这个服务不存在了。说明了什么？<br>这就告诉我们以后这个服务在Centos8废除了，那么下面我来教大家怎么配置吧<br>目前学到就是有两种方法：<br>方法一：<br>通过ifdown/ifup的方式来进行关闭和重启</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# egrep "IPADD|NETMA|GATE|BOOT" /etc/sysconfig/network-scripts/ifcfg-ens33 </span><br><span class="line">BOOTPROTO=static    //默认是DHCP获取地址，改成static静态设置</span><br><span class="line">ONBOOT=yes   //默认是NO，改成yes，启动网卡</span><br><span class="line">IPADDR=172.16.101.200   //设置ip地址</span><br><span class="line">NETMASK=255.255.255.0   //设置掩码地址</span><br><span class="line">GATEWAY=172.16.101.100  //设置网关</span><br><span class="line">[root@localhost ~]# ifdown  ens33  //先把ens33这个网卡进行关闭</span><br><span class="line">[root@localhost ~]# ifup  ens33  //先把ens33这个网卡进行开启</span><br></pre></td></tr></table></figure>
<p>这样我们就完成了重启的动作，使用ip addr和ifconfig即可到我们设置的IP地址<br>方法二：（推荐）<br>通过nmcli进行管理</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# nmcli connection modify ens33 ipv4.addresses 172.16.101.250/24 ipv4.gateway 172.16.101.100 ipv4.dns 172.16.101.254 ipv4.method manual connection.autoconnect yes connection.interface-name ens33</span><br><span class="line">ipv4.addresses：设置IP地址</span><br><span class="line">ipv4.gateway: 设置网关</span><br><span class="line">ipv4.method：设置模式，有auto|manaual两个模式</span><br><span class="line">connection.autoconnect yes   //开启连接</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# nmcli connection reload   //加载网卡信息</span><br><span class="line">[root@localhost ~]# nmcli connection down ens33   //关闭网卡</span><br><span class="line">[root@localhost ~]# nmcli connection up ens33     //开启网卡</span><br><span class="line">[root@localhost ~]# egrep "IPADD|NETMA|GATE|BOOT|PR|DNS" /etc/sysconfig/network-scripts/ifcfg-ens33   //查看网卡配置</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=172.16.101.250</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=172.16.101.100</span><br><span class="line">PREFIX=24</span><br><span class="line">DNS1=172.16.101.254</span><br></pre></td></tr></table></figure>
<p>这边的话，我个人推荐第二种方法，命令是有点长，但是这样配置比较符合Centos8的配置方式，废除network.manager的方式<br>就是告诉我们不要太过于依赖vim的方式配置。</p>
]]></content>
      <categories>
        <category>Centos/Redhat</category>
      </categories>
      <tags>
        <tag>Centos8</tag>
        <tag>原创</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos8(1)-配置本地yum源</title>
    <url>/2020/02/07/CentosORredhat/Centos8(1)/</url>
    <content><![CDATA[<p>博主在昨天晚上进行了centos8的安装，在配置本地yum方法上一直失败，一直报元数据失败等。<br>在今天下午，我对Centos8的yum源进行了分析得到一下结果：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# grep -v "#" /etc/yum.repos.d/CentOS-Media.repo          </span><br><span class="line"></span><br><span class="line">[c8-media-BaseOS]    //Centos的工具库</span><br><span class="line">name=CentOS-BaseOS-$releasever - Media    </span><br><span class="line">baseurl=file:///media/CentOS/BaseOS</span><br><span class="line">        file:///media/cdrom/BaseOS</span><br><span class="line">        file:///media/cdrecorder/BaseOS</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line"></span><br><span class="line">[c8-media-AppStream]  //Centos的软件库</span><br><span class="line">name=CentOS-AppStream-$releasever - Media</span><br><span class="line">baseurl=file:///media/CentOS/AppStream</span><br><span class="line">        file:///media/cdrom/AppStream</span><br><span class="line">        file:///media/cdrecorder/AppStream</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br></pre></td></tr></table></figure>
<p>这也符合了Centos8的最新安装的dnf的方式！下面我就来教大家怎么进行配置本地yum</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# rm -rf /etc/yum.repos.d/CentOS-[DBVAE]*    //删除DBVAE开头的repo文件</span><br><span class="line">[root@localhost ~]# vim /etc/yum.repos.d/CentOS-Media.repo      //编辑Centos-media.repo文件</span><br><span class="line">[c8-media-BaseOS]</span><br><span class="line">name=CentOS-BaseOS-$releasever - Media</span><br><span class="line">baseurl=file:///mnt/cdrom/BaseOS    //这边的BaseOS这个目录不用创建，等等直接挂载到/mnt/cdrom即可</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   //开启yum仓库（工具）</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line"></span><br><span class="line">[c8-media-AppStream]</span><br><span class="line">name=CentOS-AppStream-$releasever - Media</span><br><span class="line">baseurl=file:///mnt/cdrom/AppStream     //这边跟上面一样</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1   //开启yum仓库（应用）</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line">使用wq保存退出！！！</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# mkdir /mnt/cdrom   //创建挂载目录</span><br><span class="line">[root@localhost ~]# mount /dev/sr0 /mnt/cdrom/  //执行挂载</span><br><span class="line">mount: /mnt/cdrom: WARNING: device write-protected, mounted read-only.    这边是一个警告。没关系的</span><br><span class="line">[root@localhost ~]# cd /mnt/cdrom/</span><br><span class="line">[root@localhost cdrom]# ls   //我们会发现有AppStream和BaseOS目录</span><br><span class="line">AppStream  BaseOS  EFI  images  isolinux  media.repo  TRANS.TBL</span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line">！！！这边需要注意的是，BaseOS和Appsteram这个目录必须存在，我们在挂载成功后</span><br><span class="line">在/mnt/cdrom目录下会有BaseOS和Appsteram这个目录，所以我们在上面设置baseurl的时候</span><br><span class="line">少不了BaseOS和Appsteram这个目录</span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line">[root@localhost cdrom]# yum clean all  //清楚yum缓存</span><br><span class="line">20 文件已删除</span><br><span class="line">[root@localhost cdrom]# yum repolist   //查看yum仓库，完成到这边已经ok了</span><br><span class="line">CentOS-BaseOS-8 - Media                                                       33 MB/s | 2.2 MB     00:00    </span><br><span class="line">CentOS-AppStream-8 - Media                                                    21 MB/s | 5.4 MB     00:00    </span><br><span class="line">上次元数据过期检查：0:00:01 前，执行于 2020年02月07日 星期五 03时15分52秒。</span><br><span class="line">仓库标识                                        仓库名称                                                状态</span><br><span class="line">c8-media-AppStream                              CentOS-AppStream-8 - Media                              4,755</span><br><span class="line">c8-media-BaseOS                                 CentOS-BaseOS-8 - Media                                 1,65</span><br><span class="line">[root@localhost cdrom]# vim /etc/fstab   //进行开机自动挂载光盘</span><br><span class="line">/dev/sr0        /mnt/cdrom      iso9600 defaults 0 0   //添加此行即可</span><br></pre></td></tr></table></figure>
<p>上面就是本地yum搭建的过程。但是我在这边提醒一下大家，如果有网络就尽量使用网络上的yum仓库，这样也会省下一些<br>配置yum仓库的时间，同时也会实时更新最新版本</p>
]]></content>
      <categories>
        <category>Centos/Redhat</category>
      </categories>
      <tags>
        <tag>Centos8</tag>
        <tag>原创</tag>
      </tags>
  </entry>
  <entry>
    <title>shell脚本安装apche服务</title>
    <url>/2020/02/06/shell/index/</url>
    <content><![CDATA[<p>shell脚本的使用过程，将下面代码复制到Centos或者Redhat服务器上赋予执行权限执行即可<br>chmod +x shell脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo "正在检测您的服务器剩余的安装包!!!"</span><br><span class="line">rpm -qa |grep httpd &amp;&gt;/dev/null</span><br><span class="line">if [ $? -eq 0 ];then</span><br><span class="line">	yum -y remove httpd* &amp;&gt;/dev/null</span><br><span class="line">	echo "清理剩余安装包完成!!!"</span><br><span class="line">else</span><br><span class="line">	echo "您的服务器没有剩余安装包!!!"</span><br><span class="line">fi</span><br><span class="line">menu () &#123;</span><br><span class="line">rpm -qa |grep httpd &amp;&gt;/dev/null</span><br><span class="line">if [ $? -eq 1 ];then</span><br><span class="line">		echo "目前没有安装网站服务器"</span><br><span class="line">	read -p  "是否安装网站服务器(yes|no):" yes</span><br><span class="line">	if [ $yes = yes ];then</span><br><span class="line">		yum -y install httpd &amp;&gt;/dev/null</span><br><span class="line">		echo "网站服务器安装成功!!!!"</span><br><span class="line">		read -p  "请输入网站配置文件(默认储存/etc/httpd/conf.d/):" config</span><br><span class="line">			touch /etc/httpd/conf.d/$config'.conf'</span><br><span class="line">			echo "您的网站配置文件设置为:/etc/httpd/conf.d/$config.conf"</span><br><span class="line">		read -p  "请输入网站域名或IP地址:" domain</span><br><span class="line">			echo "您的网站域名或IP为:$domain"</span><br><span class="line">		read -p  "请输入网站根目录(默认为/var/www/html):" root</span><br><span class="line">			mkdir $root &amp;&gt;/dev/null</span><br><span class="line">			echo "网站根目录已经设置为$root"</span><br><span class="line">			read -p "请输入网站首页(默认为index.html):" index</span><br><span class="line">			touch /$root/$index</span><br><span class="line">			read -p "请输入网站首页内容:" neir</span><br><span class="line">			echo "$neir" &gt;&gt; /$root/$index</span><br><span class="line">			while true</span><br><span class="line">			do</span><br><span class="line">				read -p "是否重新加载配置文件(yes|no)" no</span><br><span class="line">				if [ $no = yes ];then</span><br><span class="line">					systemctl restart httpd</span><br><span class="line">					echo "网站服务器重新加载成功!!"</span><br><span class="line">					break</span><br><span class="line">				else</span><br><span class="line">					echo "建议您重启加载配置"</span><br><span class="line">				fi</span><br><span class="line">					</span><br><span class="line">			done</span><br><span class="line">echo "====================================================="</span><br><span class="line">echo "您的网站配置文件是:/etc/httpd/conf.d/$config.conf"</span><br><span class="line">echo "您的服务器域名或IP是:"$domain</span><br><span class="line">echo "您的服务器根目录是:"$root</span><br><span class="line">echo "您的服务器首页是:"$index</span><br><span class="line">echo "您的服务器首页内容是:"$neir</span><br><span class="line">echo "写入配置文件成功!!!赶紧访问你的服务器吧！"</span><br><span class="line">cat &gt;&gt; /etc/httpd/conf.d/$config.conf &lt;&lt; OEF</span><br><span class="line">&lt;virtualhost *:80&gt;</span><br><span class="line">servername $domain</span><br><span class="line">documentroot $root</span><br><span class="line">directoryindex $index </span><br><span class="line">&lt;directory "$root"&gt; </span><br><span class="line">        require all granted</span><br><span class="line">&lt;/directory&gt; </span><br><span class="line">&lt;/virtualhost&gt;</span><br><span class="line">OEF</span><br><span class="line">echo "====================================================="</span><br><span class="line">	else</span><br><span class="line">		echo "已经取消安装网站服务器"</span><br><span class="line">	fi</span><br><span class="line">else</span><br><span class="line">	echo "网站服务器已安装"	</span><br><span class="line">fi</span><br><span class="line">&#125;</span><br><span class="line">menu</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Centos/Redhat</category>
      </categories>
      <tags>
        <tag>shell脚本</tag>
      </tags>
  </entry>
  <entry>
    <title>博客知乎</title>
    <url>/2020/02/06/index/</url>
    <content><![CDATA[<p>本博主将把日常学习到的知识在该博客上进行分享！<br>请善待每一份资源，都来之不易，请尊重每一位博主<br>在原创文章中，未经博主允许，进行商用或者进行转载（未标明转载处）必究</p>
]]></content>
  </entry>
</search>
